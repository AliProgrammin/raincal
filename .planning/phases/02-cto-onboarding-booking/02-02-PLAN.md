# Plan 02-02: Configure Email Service

**Phase:** 2 - CTO Onboarding and Core Booking
**Objective:** Enable email notifications for booking confirmations and reminders
**Requirements:** BOOK-06 (email confirmation), BOOK-07 (email reminder)

## Context

Cal.com supports multiple email providers. For university use, recommend:
- SendGrid (free tier: 100 emails/day)
- Resend (free tier: 3000 emails/month)
- SMTP (any provider)

## Prerequisites

- Email service account (SendGrid/Resend/SMTP)
- RainCal deployed

## Tasks

### Task 1: Choose Email Provider

**Option A: SendGrid (Recommended)**
- Free tier: 100 emails/day
- Good deliverability
- Easy setup

**Option B: Resend**
- Free tier: 3000 emails/month
- Modern API
- Good for developers

**Option C: University SMTP**
- May have higher sending limits
- Uses university domain (better deliverability)

### Task 2: Get Email Credentials

**For SendGrid:**
1. Create account at https://sendgrid.com
2. Create API key with "Mail Send" permissions
3. Verify sender identity (email or domain)

**For Resend:**
1. Create account at https://resend.com
2. Create API key
3. Add and verify domain

**For SMTP:**
- Get SMTP host, port, username, password from IT

### Task 3: Configure Environment Variables

Add to `.env`:

**SendGrid:**
```bash
EMAIL_FROM="RainCal <noreply@raincal.yourdomain.com>"
SENDGRID_API_KEY=SG.xxxxx
```

**Resend:**
```bash
EMAIL_FROM="RainCal <noreply@raincal.yourdomain.com>"
RESEND_API_KEY=re_xxxxx
```

**SMTP:**
```bash
EMAIL_FROM="RainCal <noreply@raincal.yourdomain.com>"
EMAIL_SERVER_HOST=smtp.example.com
EMAIL_SERVER_PORT=587
EMAIL_SERVER_USER=username
EMAIL_SERVER_PASSWORD=password
```

### Task 4: Test Email Delivery

1. Create test booking as guest
2. Check guest receives confirmation email
3. Check CTO receives notification
4. Verify emails show RainCode branding (may need BRAND-04)

### Task 5: Configure Email Reminders

Cal.com has built-in reminder system:
1. Default reminders: 24h before, 1h before
2. Can be configured per event type
3. Verify reminders are enabled in settings

## Verification

- [ ] Email credentials configured
- [ ] Booking confirmation emails sent
- [ ] CTO notification emails sent
- [ ] Email reminders working
- [ ] Emails show RainCal branding

## Notes

- For testing locally: Use Mailhog (included in yarn dx)
- Email templates are in `/packages/emails/`
- May need to customize templates for BRAND-04
