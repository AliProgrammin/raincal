# Plan 02-01: Configure Google Calendar Integration

**Phase:** 2 - CTO Onboarding and Core Booking
**Objective:** Enable CTOs to connect their Google Calendar for availability sync
**Requirements:** CTO-01 (Google Calendar connection)

## Context

Cal.com has built-in Google Calendar integration. We need to:
1. Create Google Cloud project
2. Configure OAuth consent screen
3. Generate OAuth credentials
4. Add credentials to RainCal environment

## Prerequisites

- Google Cloud account
- Access to Google Cloud Console
- RainCal deployed (or localhost for testing)

## Tasks

### Task 1: Create Google Cloud Project

1. Go to https://console.cloud.google.com
2. Create new project: "RainCal"
3. Enable Google Calendar API:
   - APIs & Services → Library
   - Search "Google Calendar API"
   - Click Enable

### Task 2: Configure OAuth Consent Screen

1. APIs & Services → OAuth consent screen
2. User Type: External (for university users)
3. App information:
   - App name: RainCal
   - User support email: support@raincode.tech
   - App logo: Upload RainCode logo
4. Scopes: Add Google Calendar scopes
   - `https://www.googleapis.com/auth/calendar.readonly`
   - `https://www.googleapis.com/auth/calendar.events`
5. Test users: Add test email addresses

### Task 3: Create OAuth Credentials

1. APIs & Services → Credentials
2. Create Credentials → OAuth Client ID
3. Application type: Web application
4. Name: RainCal Web
5. Authorized JavaScript origins:
   - http://localhost:3000 (development)
   - https://raincal.yourdomain.com (production)
6. Authorized redirect URIs:
   - http://localhost:3000/api/integrations/googlecalendar/callback
   - https://raincal.yourdomain.com/api/integrations/googlecalendar/callback
7. Download JSON credentials

### Task 4: Add Credentials to Environment

Add to `.env`:
```bash
GOOGLE_API_CREDENTIALS='{"web":{"client_id":"...","project_id":"raincal","auth_uri":"...","token_uri":"...","client_secret":"..."}}'
```

Or separate variables:
```bash
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret
```

### Task 5: Enable Google Calendar App in Cal.com

1. Log in as admin
2. Go to App Store → Installed Apps
3. Find Google Calendar
4. Enable the integration

### Task 6: Test Google Calendar Connection

1. Log in as a test CTO user
2. Go to Settings → Calendars
3. Click "Connect Google Calendar"
4. Complete OAuth flow
5. Verify calendar appears in connected calendars
6. Create event type, verify busy times block

## Verification

- [ ] Google Cloud project created with Calendar API enabled
- [ ] OAuth credentials generated
- [ ] Credentials added to environment
- [ ] Test user can connect Google Calendar
- [ ] Calendar events block availability

## Notes

- For production: Submit OAuth consent screen for verification
- Development mode allows 100 test users
- Calendar sync happens automatically after connection
